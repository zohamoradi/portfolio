@import "tailwindcss";

@theme {
  --color-brand: oklch(72% 0.16 45);
  --color-brand-fg: oklch(17% 0.03 45);
  --color-brand-dark: oklch(58% 0.16 45);
  --radius-xl: 1rem;
  --radius-2xl: 1.35rem;
}

:root {
  --bg: 28 45% 98%;
  --fg: 24 30% 14%;
  --muted: 26 12% 42%;
  --card: 0 0% 100%;
  --ring: 18 90% 65%;
}

.dark {
  --bg: 18 15% 10%;
  --fg: 30 30% 96%;
  --muted: 22 8% 72%;
  --card: 18 14% 14%;
  --ring: 18 85% 68%;
}

@layer base {
  html, body { @apply h-full; }

  /* مهم‌ترین بهینه‌سازی‌ها:
     - حذف background-attachment: fixed
     - کاهش تعداد گرادیان‌ها و ساده‌سازی
  */
  body {
    @apply bg-[hsl(var(--bg))] text-[hsl(var(--fg))] antialiased;
    background-image:
      radial-gradient(60% 45% at 20% 10%, hsla(18, 90%, 85%, 0.25), transparent 60%),
      radial-gradient(55% 40% at 80% 15%, hsla(45, 90%, 90%, 0.25), transparent 60%);
    background-repeat: no-repeat;
    background-size: 160% 160%;
    background-position: center top;
    /* ثابت نبودن پس‌زمینه => بدون repaint سنگین موقع اسکرول */
  }

  ::selection { @apply bg-brand/20; }
}

@layer components {
  .container-prose { @apply max-w-5xl mx-auto px-4 sm:px-6 lg:px-8; }

  /* کارت‌ها: حذف backdrop-blur و سایه‌ی عظیم */
  .card {
    @apply rounded-2xl bg-[hsl(var(--card))]/95 border border-[hsla(18,50%,70%,0.18)];
    /* سایه‌ی سبک‌تر و ارزان‌تر */
    @apply shadow-[0_6px_24px_-10px_rgba(15,15,15,0.18)];
    /* کمک به رندر: محتواهای دور از دید skip بشن */
    content-visibility: auto;
    contain: layout paint style;
  }

  .btn {
    @apply inline-flex items-center gap-2 rounded-xl px-4 py-2 font-medium
           transition duration-150
           ring-1 ring-[hsla(18,40%,55%,0.28)] hover:ring-[hsla(18,65%,50%,0.5)]
           bg-white/30 dark:bg-white/5
           hover:-translate-y-[1px] active:translate-y-0;
    /* از will-change عمومی استفاده نکن؛ هزینه‌ی دائمی داره */
  }

  .btn-primary {
    @apply inline-flex items-center gap-2 rounded-xl px-4 py-2 font-semibold
           transition duration-150
           bg-brand text-[var(--color-brand-fg)]
           shadow-[0_8px_20px_-12px_rgba(249,115,22,0.6)]
           hover:brightness-[1.03] hover:-translate-y-[1px]
           ring-1 ring-[hsla(18,70%,55%,0.55)];
  }

  .btn-ghost {
    @apply inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium
           transition
           bg-[hsla(28,40%,96%,0.45)] dark:bg-white/5
           hover:bg-[hsla(28,40%,96%,0.85)] dark:hover:bg-white/10
           ring-1 ring-[hsla(18,35%,70%,0.3)];
  }

  .badge {
    @apply inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs tracking-tight
           bg-[hsla(18,78%,92%,0.85)] dark:bg-[hsla(18,50%,50%,0.22)]
           text-[hsl(var(--fg))] dark:text-white/90
           ring-1 ring-[hsla(18,50%,70%,0.45)];
  }
}

/* پس‌زمینهٔ تزئینی: بدون ماسک و بدون گرادیان‌های ریز */
.bg-grid {
  background-image:
    radial-gradient(50% 45% at 15% 12%, hsla(18, 85%, 82%, 0.22), transparent 62%),
    radial-gradient(52% 40% at 85% 14%, hsla(45, 90%, 88%, 0.22), transparent 62%);
  background-size: 140% 140%;
  background-position: center top;
  /* بدون mask-image و بدون fixed */
}
